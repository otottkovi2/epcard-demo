<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="wnameth=device-wnameth, initial-scale=1.0">
    <title>EPS test form</title>
    <style>
        body *{
            margin: 1em;
        }
        form{
            display: flex;
            flex-direction: column;
            width: 100vw;
            align-items: center;
        }
        form *{
            width: 50%;
        }
        form legend{
            width: auto;
        }
    </style>
</head>
<body>
    <h1>EPS test form - for technical testing</h1>
    <label for="debug_target">IP of host:<input name="debug_target"></label>

    <form action="http://127.0.0.1:8080/api/submit" method="post">
        <label for="name">Name:<input type="text" name="name"></label>
        
        <label for="password">password:<input type="password" name="password"></label>
        
        <label for="companyName">company name:<input type="text" name="companyName"></label>
        
        <label for="category">Category:<select name="category">
            <option>electronics</option>
            <option>home</option>
            <option>office</option>
            <option>beauty</option>
            <option>health</option>
            <option>toys</option>
            <option>car</option>
            <option>car accessory</option>
            <option>sport</option>
            <option>fashion</option>
            <option>food</option>
        </select></label>
        
        <label for="origin">Country of origin:<select name="origin">
            <option>domestic</option>
            <option>imported + domestic</option>
            <option>imported</option>
        </select></label>
        <fieldset>
            <legend>Are you using recycled pellets?</legend>
            <label for="pellet">
                <input type="radio" value="true" name="pellet" id="pellet">
                Yes
            </label>
            <label for="pellet_no"><input type="radio" value="false" name="pellet" id="pellet_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the product recycled??</legend>
            <label for="recycled">
                <input type="radio" value="true" name="recycled" id="recycled">
                Yes
            </label>
            <label for="recycled_no">
                <input type="radio" value="false" name="recycled" id="recycled_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the product made from reused materials??</legend>
            <label for="reused">
                <input type="radio" value="true" name="reused" id="reused">
                Yes
            </label>
            <label for="reused_no">
                <input type="radio" value="false" name="reused" id="reused_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the product made w/ renewable energy??</legend>
            <label for="renewable">
                <input type="radio" value="true" name="renewable" id="renewable">
                Yes
            </label>
            <label for="renewable_no">
                <input type="radio" value="false" name="renewable" id="renewable_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the product recyclable??</legend>
            <label for="recyclable">
                <input type="radio" value="true" name="recyclable" id="recyclable">
                Yes
            </label>
            <label for="recyclable_no">
                <input type="radio" value="false" name="recyclable" id="recyclable_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the factory insulated?</legend>
            <label for="hasInsulation">
                <input type="radio" value="true" name="hasInsulation" id="hasInsulation">
                Yes
            </label>
            <label for="hasInsulation_no">
                <input type="radio" value="false" name="hasInsulation" id="hasInsulation_no">
                No
            </label>
        </fieldset>
        <fieldset>
            <legend>Is the product bio?</legend>
            <label for="bio">
                <input type="radio" value="true" name="bio" id="bio">
                Yes
            </label>
            <label for="bio_no">
                <input type="radio" value="false" name="bio" id="bio_no">
                No
            </label>
        </fieldset>
        
        <label for="co2">How much CO2 do you produce while producing the product?<input type="number" name="co2" id="co2"></label>
        
        <label for="ch4">How much CH4 do you produce while making the product?<input type="number" name="ch4" id="ch4"></label>
        
        <label for="reuseWaste">How much Waste do you reuse per product?<input type="number" name="reuseWaste" id="reuseWaste"></label>
        
        
        <button type="submit">Submit</button>
    </form>
    <script>
        window.onload = () => {
            document.querySelector("form").addEventListener("submit", async (e) => {
            e.preventDefault()
            console.log("helo im running")
            let form = e.currentTarget;
            let url = form.action;
            let formData = new FormData(form);
            alert("Sent! result code is: " + await postForm(url,formData))
            
            
        })
        }
        
        
        async function postForm(url,form){
            let formData = Object.fromEntries(form.entries())
            console.log(formData.toString())
            let formJson = JSON.stringify(formData);
            let response; 
            fetch(url,{
                method: "POST",
                headers:{
                    "Content-Type": "application/json",
                    Accept: "application/json",
                },
                body: formJson
            }).then((v) => response = v);
            return response;
        }</script>
</body>
</html>